"use strict";(globalThis["webpackChunksupersayan"]=globalThis["webpackChunksupersayan"]||[]).push([[843],{3843:(a,e,t)=>{t.r(e),t.d(e,{default:()=>u});var l=t(9835);function s(a,e,t,s,o,d){const i=(0,l.up)("s-loading"),m=(0,l.up)("t-input"),u=(0,l.up)("s-form"),n=(0,l.up)("s-drawer");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(i,{load:o.loading},null,8,["load"]),(0,l.Wm)(n,{onRefresh:a.refresh,useModal:o.useModal,form:"",onSubmit:d.submit,onBack:d.back,Meta:o.Meta},{default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(u,{class:"q-px-md q-py-lg",title:"Form Categories"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{col:"6",label:"code",modelValue:o.model.code,"onUpdate:modelValue":e[0]||(e[0]=a=>o.model.code=a),topLabel:"code",readonly:""},null,8,["modelValue"]),(0,l.Wm)(m,{col:"6",label:"name",modelValue:o.model.name,"onUpdate:modelValue":e[1]||(e[1]=a=>o.model.name=a),topLabel:"name",onUpdateEvent:e[2]||(e[2]=a=>o.model.code=`CTG-${a.toUpperCase()}`)},null,8,["modelValue"]),(0,l.Wm)(m,{col:"12",label:"remark",type:"textarea",modelValue:o.model.remark,"onUpdate:modelValue":e[3]||(e[3]=a=>o.model.remark=a)},null,8,["modelValue"])])),_:1})])])),_:1},8,["onRefresh","useModal","onSubmit","onBack","Meta"])])}t(9665);var o=t(8009);const d={name:o.Z.name+"Form",props:["modal","id","submitOnModal"],created(){this.$Handle.loadingStart(),this.Meta.model={},this.$route.params.id&&(this.param=this.$route.params.id?this.$route.params.id:null),this.id&&(this.param=this.id?this.id:null),this.modal&&!0===this.modal.add&&(this.useModal=!0),this.modal&&!0===this.modal.edit&&(this.useModal=!0),null!==this.param&&this.findId(this.param),this.$Handle.loadingStop()},data(){return{Meta:o.Z,useModal:!1,model:o.Z.model,loading:!1,edit:!1,param:null}},watch:{submitOnModal:function(a){a.isTrusted&&this.submit()}},methods:{findId(a){let e=o.Z.module+"/"+a;this.$api.get(e,((a,e,t,l)=>{200==e&&(this.model=a,this.$Handle.loadingStop())}))},async submit(){this.$Handle.loadingStart(),null!==this.param?await this.editData(this.param):await this.postData(this.model)},editData(a){let e=this.Meta.module+"/"+a;this.$api.put(e,this.model,((a,e,t,l)=>{200==e&&(this.$Handle.successMessage(t),this.$Handle.loadingStop(),this.back())}))},postData(a){let e=this.Meta.module;this.$api.post(e,a,((a,e,t,l)=>{200==e&&(this.$Handle.successMessage(t),this.$Handle.loadingStop(),this.back())}))},back(){if(1!=this.useModal)return this.$router.push({name:o.Z.module,query:{...this.$route.query}});this.$emit("closeModal")}}};var i=t(1639);const m=(0,i.Z)(d,[["render",s]]),u=m}}]);