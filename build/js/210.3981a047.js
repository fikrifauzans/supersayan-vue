"use strict";(globalThis["webpackChunksupersayan"]=globalThis["webpackChunksupersayan"]||[]).push([[210],{8402:(e,t,a)=>{a.d(t,{Z:()=>s});const s={name:"Roles",module:"roles",schema:"auth",module_name:"Management Account",formType:{show:!1,edit:!1,add:!1},model:{name:null,access_permission:[]},table:{columns:(e,t,a)=>[{name:"id",label:"Option",field:"id",sortable:!0,align:"left"},{name:"name",label:"Name",field:"name",sortable:!0,align:"left"},{name:"slug",label:"Slug",field:"slug",sortable:!0,align:"left"}]}}},6149:(e,t,a)=>{a.d(t,{Z:()=>g});var s=a(9835),l=a(6970);function i(e,t,a,i,o,n){const d=(0,s.up)("t-input"),r=(0,s.up)("q-th"),u=(0,s.up)("q-btn"),m=(0,s.up)("q-td"),c=(0,s.up)("q-table");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(d,{col:"12",label:"search",modelValue:o.table.search,"onUpdate:modelValue":t[0]||(t[0]=e=>o.table.search=e)},null,8,["modelValue"]),(0,s.Wm)(c,{"virtual-scroll":"",class:"q-my-sm",rows:o.table.rows,columns:o.table.columns,"row-key":"id",selection:"multiple",selected:o.table.selected,"onUpdate:selected":[t[1]||(t[1]=e=>o.table.selected=e),t[3]||(t[3]=e=>n.update(o.table.selected))],pagination:o.table.pagination,"onUpdate:pagination":t[2]||(t[2]=e=>o.table.pagination=e),style:(0,l.j5)(e.$Static.table.height("300px")),dense:e.$Static.table.dense(),flat:e.$Static.table.flat(),color:e.$Static.table.color(),"rows-per-page-label":e.$Static.table.rowPerPageLabel(),"rows-per-page-options":e.$Static.table.rowPerPageOption(0),square:e.$Static.table.square(),bordered:e.$Static.table.bordered(),"binary-state-sort":"","visible-columns":o.table.visibleColumns,onRequest:n.getData,loading:e.loading,filter:o.table.search,separator:e.$Static.table.separator()},(0,s.Nv)({"header-cell-status":(0,s.w5)((()=>[""==a.status?((0,s.wg)(),(0,s.j4)(r,{key:0},{default:(0,s.w5)((()=>[(0,s.Uk)(" Status ")])),_:1})):(0,s.kq)("",!0)])),"body-cell-status":(0,s.w5)((e=>[""==a.status?((0,s.wg)(),(0,s.j4)(m,{key:0,class:"text-center"},{default:(0,s.w5)((()=>[e.row.status?((0,s.wg)(),(0,s.j4)(u,{key:0,icon:"check",size:"xs",color:"positive",round:"",rounded:""})):((0,s.wg)(),(0,s.j4)(u,{key:1,icon:"close",size:"xs",color:"negative",round:"",rounded:""}))])),_:2},1024)):(0,s.kq)("",!0)])),_:2},[""==a.status?{name:"body-selection",fn:(0,s.w5)((()=>[])),key:"0"}:void 0,""==a.status?{name:"header-selection",fn:(0,s.w5)((()=>[])),key:"1"}:void 0]),1032,["rows","columns","selected","pagination","style","dense","flat","color","rows-per-page-label","rows-per-page-options","square","bordered","visible-columns","onRequest","loading","filter","separator"])])}a(9665);const o={name:"Permissions",module:"permissions",schema:"auth",module_name:"Management Account",formType:{show:!0,edit:!0,add:!1},model:{name:null,username:null,email:null,address:null,password:null},table:{columns:(e,t,a)=>[{name:"status",label:"Status",field:"status",sortable:!0,align:"left"},{name:"name",label:"Name",field:"name",sortable:!0,align:"center"},{name:"slug",label:"Slug",field:"slug",sortable:!0,align:"left"}]}},n={components:{},props:["permissions","status"],data(){return{Meta:o,id:null,table:o.table,filter:{value:!1,query:null}}},created(){this.table=this.$Handle.structureTable(this.table.columns(this.$Help,this.$Lang,this.Static)),this.refresh()},watch:{},methods:{refresh(){this.getData()},getData(e){this.loading=!0,e&&(this.table.pagination=e.pagination);let{page:t,rowsPerPage:a,sortBy:s,descending:l}={...this.table.pagination},i=this.Meta.module+"?table=";i+="&like="+this.$Help.transformQuery(this.filter.query),i+=this.trash?"&trash=true":"",i+="&page="+t,i+="&limit=0",i+="&order="+this.$Handle.transformDesc(s,l),this.table.search&&(i+="&search="+this.table.search),this.$api.get(i,((e,t,a,s)=>{if(200==t){this.table.rows=e.data.filter((e=>this.trash&&this.table.search?null!==e.deleted_at:e)),this.loading=!1;for(let e=0;e<this.permissions.length;e++)for(let t=0;t<this.table.rows.length;t++)this.permissions[e].permission_id==this.table.rows[t].id&&(this.table.rows[t].status=!0,this.table.selected.push(this.table.rows[t]));this.update(this.table.selected)}}),(e=>{}))},update(e){this.$emit("update:modelValue",e)}}};var d=a(1639),r=a(1227),u=a(1682),m=a(7220),c=a(8879),h=a(9984),p=a.n(h);const b=(0,d.Z)(n,[["render",i]]),g=b;p()(n,"components",{QTable:r.Z,QTh:u.Z,QTd:m.Z,QBtn:c.Z})},2210:(e,t,a)=>{a.r(t),a.d(t,{default:()=>p});var s=a(9835);const l={class:"col-12 row"},i={class:"col-12 row q-mt-md"},o={class:"col-6"},n={class:"col-6",style:{height:"100%"}};function d(e,t,a,d,r,u){const m=(0,s.up)("s-loading"),c=(0,s.up)("t-input"),h=(0,s.up)("t-select-api"),p=(0,s.up)("s-form"),b=(0,s.up)("PermissionsTable"),g=(0,s.up)("s-drawer");return(0,s.wg)(),(0,s.iD)("div",l,[(0,s.Wm)(m,{load:r.loading},null,8,["load"]),(0,s.Wm)(g,{onRefresh:e.refresh,useModal:r.useModal,form:"",onSubmit:u.submit,onBack:u.back,Meta:r.Meta},{default:(0,s.w5)((()=>[(0,s._)("div",i,[(0,s._)("div",o,[(0,s.Wm)(p,{title:"Roles",class:"q-px-md"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{col:"12",label:"name",required:"",modelValue:r.model.name,"onUpdate:modelValue":t[0]||(t[0]=e=>r.model.name=e)},null,8,["modelValue"]),(0,s.Wm)(c,{col:"12",label:"slug",required:"",modelValue:r.model.slug,"onUpdate:modelValue":t[1]||(t[1]=e=>r.model.slug=e)},null,8,["modelValue"]),(0,s.Wm)(h,{col:"12",api:"master-menus",modelValue:r.model.master_menu_id,"onUpdate:modelValue":t[2]||(t[2]=e=>r.model.master_menu_id=e),optionValue:"id",optionLabel:e=>e?e.name??r.model.master_menu.name:"",label:"Master Menu"},null,8,["modelValue","optionLabel"])])),_:1})]),(0,s._)("div",n,[(0,s.Wm)(p,{class:"q-px-md",title:"Permissions Access"},{default:(0,s.w5)((()=>[r.model.permission_access?((0,s.wg)(),(0,s.j4)(b,{key:0,class:"col-12",permissions:r.model.permission_access,modelValue:r.model.permission_access,"onUpdate:modelValue":t[3]||(t[3]=e=>r.model.permission_access=e)},null,8,["permissions","modelValue"])):(0,s.kq)("",!0)])),_:1})])])])),_:1},8,["onRefresh","useModal","onSubmit","onBack","Meta"])])}a(9665);var r=a(8402),u=a(6149);const m={name:r.Z.name+"Form",props:["modal","id","submitOnModal"],components:{PermissionsTable:u.Z},created(){this.$Handle.loadingStart(),this.Meta.model={},this.$route.params.id&&(this.param=this.$route.params.id?this.$route.params.id:null),this.id&&(this.param=this.id?this.id:null),this.modal&&!0===this.modal.add&&(this.useModal=!0),this.modal&&!0===this.modal.edit&&(this.useModal=!0),null!==this.param&&this.findId(this.param),this.$Handle.loadingStop()},data(){return{Meta:r.Z,useModal:!1,model:r.Z.model,loading:!1,edit:!1,param:null,showPermission:!1}},watch:{submitOnModal:function(e){e.isTrusted&&this.submit()}},methods:{findId(e){let t=r.Z.module+"/"+e;this.$api.get(t,((e,t,a,s)=>{200==t&&(this.model=e,this.showPermission=!0,this.$Handle.loadingStop())}))},async submit(){this.$Handle.loadingStart(),null!==this.param?await this.editData(this.param):await this.postData(this.model)},editData(e){let t=this.Meta.module+"/"+e;this.$api.put(t,this.model,((e,t,a,s)=>{200==t&&(this.$Handle.successMessage(a),this.$Handle.loadingStop(),this.back())}))},postData(e){let t=this.Meta.module;this.$api.post(t,e,((e,t,a,s)=>{200==t&&(this.$Handle.successMessage(a),this.$Handle.loadingStop(),this.back())}))},back(){if(1!=this.useModal)return this.$router.push({name:r.Z.module,query:{...this.$route.query}});this.$emit("closeModal")}}};var c=a(1639);const h=(0,c.Z)(m,[["render",d]]),p=h}}]);