"use strict";(globalThis["webpackChunksupersayan"]=globalThis["webpackChunksupersayan"]||[]).push([[939],{7224:(l,e,a)=>{a.d(e,{Z:()=>t});const t={name:"Permissions",module:"permissions",schema:"auth",module_name:"Management Account",formType:{show:!1,edit:!1,add:!1},model:{name:null,slug:null},table:{columns:(l,e,a)=>[{name:"id",label:"Option",field:"id",sortable:!0,align:"left"},{name:"name",label:"Name",field:"name",sortable:!0,align:"left"},{name:"slug",label:"Slug",field:"slug",sortable:!0,align:"left"}]}}},9939:(l,e,a)=>{a.r(e),a.d(e,{default:()=>w});a(9665);var t=a(9835);const s={class:"q-px-md"},o={class:"q-mb-lg"},i={key:0,class:"col-12 row"},d={key:1,class:"col-12"},m={class:"row justify-end q-mb-md"},u={class:"col-12 q-my-sm q-px-sm"};function n(l,e,a,n,r,p){const h=(0,t.up)("s-loading"),c=(0,t.up)("q-toggle"),g=(0,t.up)("t-input"),b=(0,t.up)("q-btn"),M=(0,t.up)("s-form"),f=(0,t.up)("s-drawer");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(h,{load:r.loading},null,8,["load"]),(0,t.Wm)(f,{onRefresh:l.refresh,useModal:r.useModal,form:"",onSubmit:p.submit,onBack:p.back,Meta:r.Meta},{default:(0,t.w5)((()=>[(0,t._)("div",s,[(0,t.Wm)(M,{class:"q-px-md q-py-lg",title:"Permission"},{default:(0,t.w5)((()=>[(0,t._)("div",o,[(0,t.Wm)(c,{modelValue:r.multipleForm,"onUpdate:modelValue":e[0]||(e[0]=l=>r.multipleForm=l),label:"multiple"},null,8,["modelValue"])]),r.multipleForm?((0,t.wg)(),(0,t.iD)("div",d,[(0,t._)("div",m,[(0,t.Wm)(b,{label:"add",size:"sm",color:"primary",type:"button",onClick:e[3]||(e[3]=l=>r.multipleModel.push({name:null,slug:null}))})]),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(r.multipleModel,((l,e)=>((0,t.wg)(),(0,t.iD)("div",{class:"col-12 row bg-grey-2 q-pt-md q-px-md",key:e},[(0,t._)("div",u,[(0,t.Wm)(b,{icon:"delete",size:"xs",round:"",rounded:"",color:"red",onClick:l=>r.multipleModel.splice(e,1)},null,8,["onClick"])]),(0,t.Wm)(g,{col:"6",label:"name",required:"",modelValue:l.name,"onUpdate:modelValue":e=>l.name=e},null,8,["modelValue","onUpdate:modelValue"]),(0,t.Wm)(g,{col:"6",label:"slug",required:"",modelValue:l.slug,"onUpdate:modelValue":e=>l.slug=e},null,8,["modelValue","onUpdate:modelValue"])])))),128))])):((0,t.wg)(),(0,t.iD)("div",i,[(0,t.Wm)(g,{col:"12",label:"name",required:"",modelValue:r.model.name,"onUpdate:modelValue":e[1]||(e[1]=l=>r.model.name=l)},null,8,["modelValue"]),(0,t.Wm)(g,{col:"12",label:"slug",required:"",modelValue:r.model.slug,"onUpdate:modelValue":e[2]||(e[2]=l=>r.model.slug=l)},null,8,["modelValue"])]))])),_:1})])])),_:1},8,["onRefresh","useModal","onSubmit","onBack","Meta"])],64)}var r=a(7224);const p={name:r.Z.name+"Form",props:["modal","id","submitOnModal"],created(){this.$Handle.loadingStart(),this.Meta.model={},this.$route.params.id&&(this.param=this.$route.params.id?this.$route.params.id:null),this.id&&(this.param=this.id?this.id:null),this.modal&&!0===this.modal.add&&(this.useModal=!0),this.modal&&!0===this.modal.edit&&(this.useModal=!0),null!==this.param&&this.findId(this.param),this.$Handle.loadingStop()},data(){return{Meta:r.Z,useModal:!1,model:r.Z.model,loading:!1,edit:!1,param:null,multipleModel:[{name:null,slug:null}],multipleForm:!1}},watch:{submitOnModal:function(l){l.isTrusted&&this.submit()}},methods:{findId(l){let e=r.Z.module+"/"+l;this.$api.get(e,((l,e,a,t)=>{200==e&&(this.model=l,this.$Handle.loadingStop())}))},async submit(){this.$Handle.loadingStart(),null!==this.param?await this.editData(this.param):(1==this.multipleForm?(await this.multipleModel.forEach((l=>{this.postData(l)})),this.back()):await this.postData(this.model),this.back())},editData(l){let e=this.Meta.module+"/"+l;this.$api.put(e,this.model,((l,e,a,t)=>{200==e&&(this.$Handle.successMessage(a),this.$Handle.loadingStop(),this.back())}))},async postData(l){let e=this.Meta.module;this.$api.post(e,l,((l,e,a,t)=>{200==e&&(this.$Handle.successMessage(a),this.$Handle.loadingStop())}))},back(){if(1!=this.useModal)return this.$router.push({name:r.Z.module,query:{...this.$route.query}});this.$emit("closeModal")}}};var h=a(1639),c=a(3175),g=a(8879),b=a(9984),M=a.n(b);const f=(0,h.Z)(p,[["render",n]]),w=f;M()(p,"components",{QToggle:c.Z,QBtn:g.Z})}}]);