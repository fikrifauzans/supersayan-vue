"use strict";(globalThis["webpackChunksupersayan"]=globalThis["webpackChunksupersayan"]||[]).push([[365],{1365:(e,a,t)=>{t.r(a),t.d(a,{default:()=>o});var s=t(9835);function l(e,a,t,l,i,r){const h=(0,s.up)("s-loading"),n=(0,s.up)("s-drawer");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(h,{load:i.loading},null,8,["load"]),(0,s.Wm)(n,{onRefresh:r.refresh,Meta:i.Meta,filter:i.filter,table:i.table,modelValue:i.filter.query,"onUpdate:modelValue":[a[0]||(a[0]=e=>i.filter.query=e),r.refresh]},{default:(0,s.w5)((()=>[(0,s.Uk)(" kosong ")])),_:1},8,["onRefresh","Meta","filter","table","modelValue","onUpdate:modelValue"])],64)}t(9665);const i={name:"Dashboard",module:"Dashboard",schema:"auth",module_name:"Management Account",formType:{show:!1,edit:!1,add:!1},model:{name:null,username:null,email:null,address:null,password:null},table:{columns:(e,a,t)=>[{name:"id",label:"Option",field:"id",sortable:!0,align:"left"},{name:"name",label:"Name",field:"name",sortable:!0,align:"left"},{name:"email",label:"Email",field:"email",sortable:!0,align:"left"},{name:"username",label:"Username",field:"username",sortable:!0,align:"left"},{name:"address",label:"Address",field:"address",sortable:!0,align:"left"},{name:"phone",label:"phone",field:"phone",sortable:!0,align:"left"},{name:"role-name",label:"Role",field:a=>e.transformField(a,"role.name"),sortable:!0,align:"left"},{name:"role-master_menu_id",label:"Master Menu",field:a=>e.transformField(a,"role.master_menu.name"),sortable:!0,align:"left"}]}},r={name:"DashBoard",components:{},data(){return{Meta:i,id:null,table:i.table,useModal:i.formType,loading:!1,modal:!1,trash:!1,modalType:"",submitOnModal:null,filter:{value:!1,query:null}}},created(){},methods:{refresh(){this.getData()},getData(e){this.loading=!0,e&&(this.table.pagination=e.pagination);let{page:a,rowsPerPage:t,sortBy:s,descending:l}={...this.table.pagination},i=this.Meta.module+"?table=";i+="&like="+this.$Help.transformQuery(this.filter.query),i+=this.trash?"&trash=true":"",i+="&page="+a,i+="&limit="+t,i+="&order="+this.$Handle.transformDesc(s,l),this.table.search&&(i+="&search="+this.table.search),this.$api.get(i,((e,a,t,s)=>{200==a&&(this.table.rows=e.data.filter((e=>this.trash&&this.table.search?null!==e.deleted_at:e)),this.table.pagination.rowsNumber=this.table.search?this.table.rows.length:e.total,this.table.pagination.page=e.current_page,this.table.pagination.rowsPerPage=e.per_page,this.loading=!1)}),(e=>{})),this.$router.replace({query:{...this.table.pagination,seach:this.table.search,trash:this.trash}})},async daleteData(){this.loading=!0,await this.table.selected.forEach((e=>{let a=this.Meta.module;a+=1==this.trash?"/force/":"/",a+=e.id,this.$api.delete(a,((e,a,t,s)=>{this.$Handle.successMessage(t),this.table.selected=[],this.refresh()}))}))},async restoreData(){this.loading=!0,await this.table.selected.forEach((e=>{let a=this.Meta.module;a+="/restore/",a+=e.id,this.$api.put(a,e,((e,a,t,s)=>{this.$Handle.successMessage(t),this.table.selected=[],this.refresh()}))}))},setTrash(){this.trash=JSON.parse(this.trash),this.trash=!this.trash,this.table.selected=[],this.table.search=null,this.table.pagination.page=1,this.table.pagination.rowsNumber=1,this.refresh()},detail(e){this.id=e,this.modalType="detail",!0===this.useModal.show?this.modal=!0:this.$router.push({params:{id:e},name:"view-"+this.Meta.module,query:{...this.$route.query}})},edit(e){this.modalType="form",!0===this.useModal.edit?(this.modal=!0,this.id=e):this.$router.push({params:{id:e},name:"edit-"+this.Meta.module,query:{...this.$route.query}})},addData(){this.modalType="form",!0===this.useModal.add?this.modal=!0:this.$router.push({name:"add-"+this.Meta.module,query:{...this.$route.query}})},submit(e){this.$Handle.loadingStart(),this.submitOnModal=e,this.refresh()},setFilter(){this.filter.value=!0}}};var h=t(1639);const n=(0,h.Z)(r,[["render",l]]),o=n}}]);