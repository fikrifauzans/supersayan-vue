"use strict";(globalThis["webpackChunksupersayan"]=globalThis["webpackChunksupersayan"]||[]).push([[960],{9960:(t,e,a)=>{a.r(e),a.d(e,{default:()=>m});var l=a(9835);const i={class:"q-px-md"};function s(t,e,a,s,d,o){const u=(0,l.up)("s-loading"),n=(0,l.up)("t-input"),m=(0,l.up)("t-file-image"),h=(0,l.up)("s-form"),r=(0,l.up)("s-drawer");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(u,{load:d.loading},null,8,["load"]),(0,l.Wm)(r,{onRefresh:t.refresh,useModal:d.useModal,form:"",onSubmit:o.submit,onBack:o.back,Meta:d.Meta},{default:(0,l.w5)((()=>[(0,l._)("div",i,[(0,l.Wm)(h,{class:"q-px-md q-py-lg",title:"Files"},{default:(0,l.w5)((()=>[(0,l.Wm)(n,{col:"6",label:"desciption",modelValue:d.model.description,"onUpdate:modelValue":e[0]||(e[0]=t=>d.model.description=t)},null,8,["modelValue"]),(0,l.Wm)(m,{col:"6",label:"File",modelValue:d.model.file,"onUpdate:modelValue":e[1]||(e[1]=t=>d.model.file=t),oldValue:d.model.name,onDeleteFile:e[2]||(e[2]=()=>{d.model.status_file="delete"})},null,8,["modelValue","oldValue"])])),_:1})])])),_:1},8,["onRefresh","useModal","onSubmit","onBack","Meta"])])}a(9665);var d=a(8870);const o={name:d.Z.name+"Form",props:["modal","id","submitOnModal"],created(){this.$Handle.loadingStart(),this.Meta.model={},this.$route.params.id&&(this.param=this.$route.params.id?this.$route.params.id:null),this.id&&(this.param=this.id?this.id:null),this.modal&&!0===this.modal.add&&(this.useModal=!0),this.modal&&!0===this.modal.edit&&(this.useModal=!0),null!==this.param&&this.findId(this.param),this.$Handle.loadingStop()},data(){return{Meta:d.Z,useModal:!1,model:d.Z.model,loading:!1,edit:!1,param:null}},watch:{submitOnModal:function(t){t.isTrusted&&this.submit()},model:{handler:function(t){},deep:!0}},methods:{findId(t){let e=d.Z.module+"/"+t;this.$api.get(e,((t,e,a,l)=>{200==e&&(this.model=t,this.$Handle.loadingStop())}))},async submit(){this.$Handle.loadingStart(),this.model=this.$Handle.loopingForm(this.model),null!==this.param?await this.editData(this.param):await this.postData(this.model)},editData(t){let e=this.Meta.module+"/"+t;this.$api.setMultipartForm(),this.$api.post(e,this.model,((t,e,a,l)=>{200==e&&(this.$Handle.successMessage(a),this.$Handle.loadingStop(),this.back())}))},postData(t){let e=this.Meta.module;this.$api.setMultipartForm(),this.$api.post(e,t,((t,e,a,l)=>{200==e&&(this.$Handle.successMessage(a),this.$Handle.loadingStop(),this.back())}))},back(){if(1!=this.useModal)return this.$router.push({name:d.Z.module,query:{...this.$route.query}});this.$emit("closeModal")}}};var u=a(1639);const n=(0,u.Z)(o,[["render",s]]),m=n}}]);