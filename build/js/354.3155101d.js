"use strict";(globalThis["webpackChunksupersayan"]=globalThis["webpackChunksupersayan"]||[]).push([[354],{6354:(e,a,l)=>{l.r(a),l.d(a,{default:()=>u});var t=l(9835);function o(e,a,l,o,d,s){const i=(0,t.up)("s-loading"),m=(0,t.up)("t-input"),u=(0,t.up)("t-select-api"),n=(0,t.up)("t-currency"),r=(0,t.up)("s-form"),p=(0,t.up)("s-drawer");return(0,t.wg)(),(0,t.iD)("div",null,[(0,t.Wm)(i,{load:d.loading},null,8,["load"]),(0,t.Wm)(p,{onRefresh:e.refresh,useModal:d.useModal,form:"",onSubmit:s.submit,onBack:s.back,Meta:d.Meta},{default:(0,t.w5)((()=>[(0,t._)("div",null,[(0,t.Wm)(r,{class:"q-px-md q-py-lg",title:"Form Products"},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{col:"6",label:"code",modelValue:d.model.code,"onUpdate:modelValue":a[0]||(a[0]=e=>d.model.code=e),topLabel:"code",readonly:""},null,8,["modelValue"]),(0,t.Wm)(u,{col:"6",label:"category",currency:"",modelValue:d.model.category_id,"onUpdate:modelValue":a[1]||(a[1]=e=>d.model.category_id=e),topLabel:"category_id",api:"categories",optionLabel:"name",optionValue:"id"},null,8,["modelValue"]),(0,t.Wm)(m,{col:"6",label:"name",modelValue:d.model.name,"onUpdate:modelValue":a[2]||(a[2]=e=>d.model.name=e),topLabel:"name",onUpdateEvent:a[3]||(a[3]=e=>d.model.code=`PROD-${e.toUpperCase()}`)},null,8,["modelValue"]),(0,t.Wm)(n,{col:"6",label:"stock",currency:"",modelValue:d.model.stock,"onUpdate:modelValue":a[4]||(a[4]=e=>d.model.stock=e),topLabel:"stock"},null,8,["modelValue"]),(0,t.Wm)(n,{col:"6",label:"price",currency:"",modelValue:d.model.price,"onUpdate:modelValue":a[5]||(a[5]=e=>d.model.price=e),topLabel:"price"},null,8,["modelValue"]),(0,t.Wm)(m,{col:"6",label:"remark",type:"textarea",modelValue:d.model.remark,"onUpdate:modelValue":a[6]||(a[6]=e=>d.model.remark=e)},null,8,["modelValue"])])),_:1})])])),_:1},8,["onRefresh","useModal","onSubmit","onBack","Meta"])])}l(9665);var d=l(4951);const s={name:d.Z.name+"Form",props:["modal","id","submitOnModal"],created(){this.$Handle.loadingStart(),this.Meta.model={},this.$route.params.id&&(this.param=this.$route.params.id?this.$route.params.id:null),this.id&&(this.param=this.id?this.id:null),this.modal&&!0===this.modal.add&&(this.useModal=!0),this.modal&&!0===this.modal.edit&&(this.useModal=!0),null!==this.param&&this.findId(this.param),this.$Handle.loadingStop()},data(){return{Meta:d.Z,useModal:!1,model:d.Z.model,loading:!1,edit:!1,param:null}},watch:{submitOnModal:function(e){e.isTrusted&&this.submit()}},methods:{findId(e){let a=d.Z.module+"/"+e;this.$api.get(a,((e,a,l,t)=>{200==a&&(this.model=e,this.$Handle.loadingStop())}))},async submit(){this.$Handle.loadingStart(),null!==this.param?await this.editData(this.param):await this.postData(this.model)},editData(e){let a=this.Meta.module+"/"+e;this.$api.put(a,this.model,((e,a,l,t)=>{200==a&&(this.$Handle.successMessage(l),this.$Handle.loadingStop(),this.back())}))},postData(e){let a=this.Meta.module;this.$api.post(a,e,((e,a,l,t)=>{200==a&&(this.$Handle.successMessage(l),this.$Handle.loadingStop(),this.back())}))},back(){if(1!=this.useModal)return this.$router.push({name:d.Z.module,query:{...this.$route.query}});this.$emit("closeModal")}}};var i=l(1639);const m=(0,i.Z)(s,[["render",o]]),u=m}}]);